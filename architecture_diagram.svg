<svg viewBox="0 0 1200 1400" xmlns="http://www.w3.org/2000/svg">
  <!-- Title -->
  <text x="600" y="30" font-size="24" font-weight="bold" text-anchor="middle" fill="#2c3e50">
    Academic Timetable System - Architecture
  </text>
  
  <!-- Client Layer -->
  <rect x="50" y="60" width="1100" height="220" fill="#e8f4f8" stroke="#3498db" stroke-width="2" rx="5"/>
  <text x="600" y="85" font-size="18" font-weight="bold" text-anchor="middle" fill="#2c3e50">
    Client Layer (React Frontend - Port 3000)
  </text>
  
  <!-- Frontend Components -->
  <g id="frontend-components">
    <rect x="80" y="100" width="240" height="160" fill="#fff" stroke="#3498db" stroke-width="1.5" rx="3"/>
    <text x="200" y="125" font-size="14" font-weight="bold" text-anchor="middle" fill="#2c3e50">Pages & Forms</text>
    <text x="95" y="150" font-size="11" fill="#34495e">‚Ä¢ Departments</text>
    <text x="95" y="170" font-size="11" fill="#34495e">‚Ä¢ Lecturers</text>
    <text x="95" y="190" font-size="11" fill="#34495e">‚Ä¢ Courses & Batches</text>
    <text x="95" y="210" font-size="11" fill="#34495e">‚Ä¢ Subjects & Rooms</text>
    <text x="95" y="230" font-size="11" fill="#34495e">‚Ä¢ Timetable View</text>
    <text x="95" y="250" font-size="11" fill="#34495e">‚Ä¢ Reports</text>
    
    <rect x="340" y="100" width="240" height="160" fill="#fff" stroke="#3498db" stroke-width="1.5" rx="3"/>
    <text x="460" y="125" font-size="14" font-weight="bold" text-anchor="middle" fill="#2c3e50">UI Components</text>
    <text x="355" y="150" font-size="11" fill="#34495e">‚Ä¢ DataTable (CRUD)</text>
    <text x="355" y="170" font-size="11" fill="#34495e">‚Ä¢ Modal Forms</text>
    <text x="355" y="190" font-size="11" fill="#34495e">‚Ä¢ Timetable Grid</text>
    <text x="355" y="210" font-size="11" fill="#34495e">‚Ä¢ PDF Export</text>
    <text x="355" y="230" font-size="11" fill="#34495e">‚Ä¢ Search & Filter</text>
    
    <rect x="600" y="100" width="240" height="160" fill="#fff" stroke="#3498db" stroke-width="1.5" rx="3"/>
    <text x="720" y="125" font-size="14" font-weight="bold" text-anchor="middle" fill="#2c3e50">State Management</text>
    <text x="615" y="150" font-size="11" fill="#34495e">‚Ä¢ React Hooks</text>
    <text x="615" y="170" font-size="11" fill="#34495e">‚Ä¢ React Router</text>
    <text x="615" y="190" font-size="11" fill="#34495e">‚Ä¢ Form Validation</text>
    <text x="615" y="210" font-size="11" fill="#34495e">‚Ä¢ Error Handling</text>
    
    <rect x="860" y="100" width="240" height="160" fill="#fff" stroke="#3498db" stroke-width="1.5" rx="3"/>
    <text x="980" y="125" font-size="14" font-weight="bold" text-anchor="middle" fill="#2c3e50">Styling</text>
    <text x="875" y="150" font-size="11" fill="#34495e">‚Ä¢ Tailwind CSS</text>
    <text x="875" y="170" font-size="11" fill="#34495e">‚Ä¢ DaisyUI</text>
    <text x="875" y="190" font-size="11" fill="#34495e">‚Ä¢ Custom Themes</text>
    <text x="875" y="210" font-size="11" fill="#34495e">‚Ä¢ Responsive Design</text>
  </g>
  
  <!-- API Connection Arrow -->
  <path d="M 600 280 L 600 320" stroke="#e74c3c" stroke-width="3" fill="none" marker-end="url(#arrowred)"/>
  <text x="620" y="305" font-size="12" fill="#e74c3c" font-weight="bold">HTTP/REST API</text>
  <text x="640" y="320" font-size="11" fill="#e74c3c">axios requests</text>
  
  <!-- Application Layer -->
  <rect x="50" y="340" width="1100" height="520" fill="#e8f5e9" stroke="#27ae60" stroke-width="2" rx="5"/>
  <text x="600" y="365" font-size="18" font-weight="bold" text-anchor="middle" fill="#2c3e50">
    Application Layer (Node.js + Express - Port 3005)
  </text>
  
  <!-- Controllers -->
  <rect x="80" y="380" width="520" height="220" fill="#fff" stroke="#27ae60" stroke-width="1.5" rx="3"/>
  <text x="340" y="405" font-size="14" font-weight="bold" text-anchor="middle" fill="#2c3e50">REST API Controllers</text>
  
  <g id="controllers">
    <rect x="100" y="420" width="140" height="120" fill="#d5f4e6" stroke="#27ae60" stroke-width="1" rx="2"/>
    <text x="170" y="440" font-size="11" font-weight="bold" text-anchor="middle" fill="#27ae60">CRUD Controllers</text>
    <text x="110" y="460" font-size="10" fill="#2c3e50">‚Ä¢ Department</text>
    <text x="110" y="475" font-size="10" fill="#2c3e50">‚Ä¢ Lecturer</text>
    <text x="110" y="490" font-size="10" fill="#2c3e50">‚Ä¢ Course</text>
    <text x="110" y="505" font-size="10" fill="#2c3e50">‚Ä¢ Batch</text>
    <text x="110" y="520" font-size="10" fill="#2c3e50">‚Ä¢ Subject</text>
    <text x="110" y="535" font-size="10" fill="#2c3e50">‚Ä¢ Room</text>
    
    <rect x="260" y="420" width="140" height="120" fill="#d5f4e6" stroke="#27ae60" stroke-width="1" rx="2"/>
    <text x="330" y="440" font-size="11" font-weight="bold" text-anchor="middle" fill="#27ae60">Business Logic</text>
    <text x="270" y="460" font-size="10" fill="#2c3e50">‚Ä¢ Validation</text>
    <text x="270" y="475" font-size="10" fill="#2c3e50">‚Ä¢ Error Handling</text>
    <text x="270" y="490" font-size="10" fill="#2c3e50">‚Ä¢ Authorization</text>
    <text x="270" y="505" font-size="10" fill="#2c3e50">‚Ä¢ JWT Auth</text>
    <text x="270" y="520" font-size="10" fill="#2c3e50">‚Ä¢ Data Transform</text>
    
    <rect x="420" y="420" width="160" height="120" fill="#d5f4e6" stroke="#27ae60" stroke-width="1" rx="2"/>
    <text x="500" y="440" font-size="11" font-weight="bold" text-anchor="middle" fill="#27ae60">Schedule Controller</text>
    <text x="430" y="460" font-size="10" fill="#2c3e50">‚Ä¢ Generate Schedule</text>
    <text x="430" y="475" font-size="10" fill="#2c3e50">‚Ä¢ Get All Classes</text>
    <text x="430" y="490" font-size="10" fill="#2c3e50">‚Ä¢ Update Schedule</text>
    <text x="430" y="505" font-size="10" fill="#2c3e50">‚Ä¢ Export Reports</text>
  </g>
  
  <!-- Genetic Algorithm Engine -->
  <rect x="620" y="380" width="520" height="460" fill="#fff" stroke="#9b59b6" stroke-width="2" rx="3"/>
  <text x="880" y="405" font-size="14" font-weight="bold" text-anchor="middle" fill="#9b59b6">
    üß¨ Genetic Algorithm Engine
  </text>
  
  <g id="ga-engine">
    <!-- Step 1 -->
    <rect x="640" y="420" width="220" height="55" fill="#f3e5f5" stroke="#9b59b6" stroke-width="1" rx="2"/>
    <text x="750" y="438" font-size="11" font-weight="bold" text-anchor="middle" fill="#9b59b6">1. INITIALIZATION</text>
    <text x="650" y="455" font-size="9" fill="#2c3e50">Population: 100 random solutions</text>
    <text x="650" y="468" font-size="9" fill="#2c3e50">Each = complete timetable</text>
    
    <!-- Step 2 -->
    <rect x="880" y="420" width="240" height="55" fill="#f3e5f5" stroke="#9b59b6" stroke-width="1" rx="2"/>
    <text x="1000" y="438" font-size="11" font-weight="bold" text-anchor="middle" fill="#9b59b6">2. FITNESS EVALUATION</text>
    <text x="890" y="455" font-size="9" fill="#2c3e50">Conflicts: -1000 penalty each</text>
    <text x="890" y="468" font-size="9" fill="#2c3e50">Preferences: +50 reward</text>
    
    <!-- Step 3 -->
    <rect x="640" y="490" width="220" height="55" fill="#f3e5f5" stroke="#9b59b6" stroke-width="1" rx="2"/>
    <text x="750" y="508" font-size="11" font-weight="bold" text-anchor="middle" fill="#9b59b6">3. SELECTION</text>
    <text x="650" y="525" font-size="9" fill="#2c3e50">Roulette Wheel Selection</text>
    <text x="650" y="538" font-size="9" fill="#2c3e50">Better fitness ‚Üí higher chance</text>
    
    <!-- Step 4 -->
    <rect x="880" y="490" width="240" height="55" fill="#f3e5f5" stroke="#9b59b6" stroke-width="1" rx="2"/>
    <text x="1000" y="508" font-size="11" font-weight="bold" text-anchor="middle" fill="#9b59b6">4. CROSSOVER (90%)</text>
    <text x="890" y="525" font-size="9" fill="#2c3e50">Multi-point crossover</text>
    <text x="890" y="538" font-size="9" fill="#2c3e50">Combine parent solutions</text>
    
    <!-- Step 5 -->
    <rect x="640" y="560" width="220" height="70" fill="#f3e5f5" stroke="#9b59b6" stroke-width="1" rx="2"/>
    <text x="750" y="578" font-size="11" font-weight="bold" text-anchor="middle" fill="#9b59b6">5. MUTATION (10%)</text>
    <text x="650" y="595" font-size="9" fill="#2c3e50">‚Ä¢ Change room</text>
    <text x="650" y="608" font-size="9" fill="#2c3e50">‚Ä¢ Reassign lecturer</text>
    <text x="650" y="621" font-size="9" fill="#2c3e50">‚Ä¢ Modify time/day</text>
    
    <!-- Step 6 -->
    <rect x="880" y="560" width="240" height="70" fill="#f3e5f5" stroke="#9b59b6" stroke-width="1" rx="2"/>
    <text x="1000" y="578" font-size="11" font-weight="bold" text-anchor="middle" fill="#9b59b6">6. LOCAL SEARCH</text>
    <text x="890" y="595" font-size="9" fill="#2c3e50">Detect collisions:</text>
    <text x="890" y="608" font-size="9" fill="#2c3e50">‚Ä¢ Same day+time conflicts</text>
    <text x="890" y="621" font-size="9" fill="#2c3e50">Resolve: alternative slots</text>
    
    <!-- Step 7 -->
    <rect x="640" y="645" width="220" height="55" fill="#f3e5f5" stroke="#9b59b6" stroke-width="1" rx="2"/>
    <text x="750" y="663" font-size="11" font-weight="bold" text-anchor="middle" fill="#9b59b6">7. ITERATE</text>
    <text x="650" y="680" font-size="9" fill="#2c3e50">100 generations</text>
    <text x="650" y="693" font-size="9" fill="#2c3e50">Track best solution</text>
    
    <!-- Step 8 -->
    <rect x="880" y="645" width="240" height="55" fill="#c8e6c9" stroke="#27ae60" stroke-width="1.5" rx="2"/>
    <text x="1000" y="663" font-size="11" font-weight="bold" text-anchor="middle" fill="#27ae60">8. OUTPUT ‚úì</text>
    <text x="890" y="680" font-size="9" fill="#2c3e50">Optimized timetable</text>
    <text x="890" y="693" font-size="9" fill="#2c3e50">Minimal conflicts + preferences</text>
    
    <!-- Algorithm Params -->
    <rect x="640" y="720" width="480" height="105" fill="#fff9e6" stroke="#f39c12" stroke-width="1.5" rx="2"/>
    <text x="880" y="740" font-size="12" font-weight="bold" text-anchor="middle" fill="#f39c12">Algorithm Parameters</text>
    <text x="650" y="760" font-size="10" fill="#2c3e50">‚Ä¢ Population Size: 100 solutions</text>
    <text x="650" y="775" font-size="10" fill="#2c3e50">‚Ä¢ Iterations: 100 generations</text>
    <text x="650" y="790" font-size="10" fill="#2c3e50">‚Ä¢ Crossover Rate: 90%</text>
    <text x="650" y="805" font-size="10" fill="#2c3e50">‚Ä¢ Mutation Rate: 10%</text>
    <text x="650" y="820" font-size="10" fill="#2c3e50">‚Ä¢ Optimization: Maximize (minimize conflicts)</text>
  </g>
  
  <!-- Routes -->
  <rect x="100" y="620" width="460" height="220" fill="#fff" stroke="#27ae60" stroke-width="1.5" rx="3"/>
  <text x="330" y="645" font-size="14" font-weight="bold" text-anchor="middle" fill="#2c3e50">API Routes</text>
  
  <g id="routes">
    <text x="120" y="670" font-size="10" fill="#27ae60" font-weight="bold">GET /dept/departments</text>
    <text x="120" y="685" font-size="10" fill="#27ae60" font-weight="bold">POST /lec/add-lecturer</text>
    <text x="120" y="700" font-size="10" fill="#27ae60" font-weight="bold">GET /crs/courses</text>
    <text x="120" y="715" font-size="10" fill="#27ae60" font-weight="bold">POST /bat/add-batch</text>
    
    <text x="320" y="670" font-size="10" fill="#27ae60" font-weight="bold">GET /sub/subjects</text>
    <text x="320" y="685" font-size="10" fill="#27ae60" font-weight="bold">POST /rm/add-room</text>
    <text x="320" y="700" font-size="10" fill="#9b59b6" font-weight="bold">GET /cls/generate ‚ö°</text>
    <text x="320" y="715" font-size="10" fill="#9b59b6" font-weight="bold">GET /cls/classes</text>
    
    <text x="120" y="745" font-size="10" fill="#7f8c8d">PUT /dept/update-department</text>
    <text x="120" y="760" font-size="10" fill="#7f8c8d">DELETE /lec/delete-lecturer</text>
    <text x="120" y="775" font-size="10" fill="#7f8c8d">PUT /bat/update-batch</text>
    <text x="120" y="790" font-size="10" fill="#7f8c8d">DELETE /sub/delete-subject</text>
    
    <text x="320" y="745" font-size="10" fill="#7f8c8d">PUT /rm/update-room</text>
    <text x="320" y="760" font-size="10" fill="#7f8c8d">GET /bat/batchsubjects</text>
    <text x="320" y="775" font-size="10" fill="#7f8c8d">POST /user/login</text>
    <text x="320" y="790" font-size="10" fill="#7f8c8d">GET /sch/schedule</text>
  </g>
  
  <!-- DB Connection Arrow -->
  <path d="M 600 860 L 600 900" stroke="#e67e22" stroke-width="3" fill="none" marker-end="url(#arroworange)"/>
  <text x="620" y="885" font-size="12" fill="#e67e22" font-weight="bold">MySQL Protocol</text>
  
  <!-- Database Layer -->
  <rect x="50" y="920" width="1100" height="440" fill="#fff3e0" stroke="#e67e22" stroke-width="2" rx="5"/>
  <text x="600" y="945" font-size="18" font-weight="bold" text-anchor="middle" fill="#2c3e50">
    Data Layer (MySQL Database)
  </text>
  
  <!-- Database Tables -->
  <g id="database-tables">
    <rect x="80" y="960" width="230" height="180" fill="#fff" stroke="#e67e22" stroke-width="1.5" rx="3"/>
    <text x="195" y="985" font-size="13" font-weight="bold" text-anchor="middle" fill="#e67e22">Master Tables</text>
    <text x="95" y="1005" font-size="10" fill="#2c3e50">department</text>
    <text x="95" y="1020" font-size="10" fill="#2c3e50">  - department_id (PK)</text>
    <text x="95" y="1035" font-size="10" fill="#2c3e50">  - department_code</text>
    <text x="95" y="1050" font-size="10" fill="#2c3e50">  - department_name</text>
    
    <text x="95" y="1075" font-size="10" fill="#2c3e50">course</text>
    <text x="95" y="1090" font-size="10" fill="#2c3e50">  - course_id (PK)</text>
    <text x="95" y="1105" font-size="10" fill="#2c3e50">  - course_name</text>
    <text x="95" y="1120" font-size="10" fill="#2c3e50">  - department_id (FK)</text>
    
    <rect x="330" y="960" width="250" height="180" fill="#fff" stroke="#e67e22" stroke-width="1.5" rx="3"/>
    <text x="455" y="985" font-size="13" font-weight="bold" text-anchor="middle" fill="#e67e22">Resource Tables</text>
    <text x="345" y="1005" font-size="10" fill="#2c3e50">lecturer</text>
    <text x="345" y="1020" font-size="10" fill="#2c3e50">  - lecturer_id (PK)</text>
    <text x="345" y="1035" font-size="10" fill="#2c3e50">  - staff_no, first_name, last_name</text>
    <text x="345" y="1050" font-size="10" fill="#2c3e50">  - department_id (FK)</text>
    <text x="345" y="1065" font-size="10" fill="#2c3e50">  - preferred_days ‚≠ê</text>
    
    <text x="345" y="1090" font-size="10" fill="#2c3e50">room</text>
    <text x="345" y="1105" font-size="10" fill="#2c3e50">  - room_id (PK), room_num</text>
    <text x="345" y="1120" font-size="10" fill="#2c3e50">  - room_type, room_capacity</text>
    
    <rect x="600" y="960" width="250" height="180" fill="#fff" stroke="#e67e22" stroke-width="1.5" rx="3"/>
    <text x="725" y="985" font-size="13" font-weight="bold" text-anchor="middle" fill="#e67e22">Academic Tables</text>
    <text x="615" y="1005" font-size="10" fill="#2c3e50">batch</text>
    <text x="615" y="1020" font-size="10" fill="#2c3e50">  - batch_id (PK), batch_code</text>
    <text x="615" y="1035" font-size="10" fill="#2c3e50">  - batch_name, batch_size</text>
    <text x="615" y="1050" font-size="10" fill="#2c3e50">  - course_id (FK), year, semester</text>
    
    <text x="615" y="1075" font-size="10" fill="#2c3e50">subject</text>
    <text x="615" y="1090" font-size="10" fill="#2c3e50">  - subject_id (PK)</text>
    <text x="615" y="1105" font-size="10" fill="#2c3e50">  - subject_code, subject_name</text>
    <text x="615" y="1120" font-size="10" fill="#2c3e50">  - has_lab, course_id (FK)</text>
    
    <rect x="870" y="960" width="260" height="180" fill="#d5f4e6" stroke="#27ae60" stroke-width="2" rx="3"/>
    <text x="1000" y="985" font-size="13" font-weight="bold" text-anchor="middle" fill="#27ae60">Generated Schedule ‚úì</text>
    <text x="885" y="1005" font-size="10" fill="#2c3e50">class (output table)</text>
    <text x="885" y="1020" font-size="10" fill="#2c3e50">  - class_id (PK)</text>
    <text x="885" y="1035" font-size="10" fill="#2c3e50">  - lecturer_staffno</text>
    <text x="885" y="1050" font-size="10" fill="#2c3e50">  - subject_code, room_num</text>
    <text x="885" y="1065" font-size="10" fill="#2c3e50">  - batch_code</text>
    <text x="885" y="1080" font-size="10" fill="#2c3e50">  - start_time, end_time</text>
    <text x="885" y="1095" font-size="10" fill="#2c3e50">  - day_of_week</text>
    <text x="885" y="1110" font-size="10" fill="#2c3e50">  - created_at</text>
    
    <text x="885" y="1130" font-size="9" fill="#27ae60" font-style="italic">Populated by GA algorithm</text>
  </g>
  
  <!-- Stored Procedures -->
  <rect x="80" y="1160" width="530" height="180" fill="#fff" stroke="#e67e22" stroke-width="1.5" rx="3"/>
  <text x="345" y="1185" font-size="13" font-weight="bold" text-anchor="middle" fill="#e67e22">Stored Procedures (MySQL)</text>
  
  <g id="stored-procs">
    <text x="100" y="1210" font-size="10" fill="#34495e" font-weight="bold">CRUD Operations:</text>
    <text x="110" y="1230" font-size="9" fill="#2c3e50">‚Ä¢ sp_add_department, sp_update_department</text>
    <text x="110" y="1245" font-size="9" fill="#2c3e50">‚Ä¢ sp_add_lecturer, sp_delete_lecturer</text>
    <text x="110" y="1260" font-size="9" fill="#2c3e50">‚Ä¢ sp_add_course, sp_update_course</text>
    <text x="110" y="1275" font-size="9" fill="#2c3e50">‚Ä¢ sp_add_batch, sp_delete_batch</text>
    
    <text x="350" y="1210" font-size="10" fill="#34495e" font-weight="bold">Query Operations:</text>
    <text x="360" y="1230" font-size="9" fill="#2c3e50">‚Ä¢ sp_get_all_departments</text>
    <text x="360" y="1245" font-size="9" fill="#2c3e50">‚Ä¢ sp_get_all_lecturers</text>
    <text x="360" y="1260" font-size="9" fill="#2c3e50">‚Ä¢ sp_get_batches_by_course</text>
    <text x="360" y="1275" font-size="9" fill="#2c3e50">‚Ä¢ sp_verify_exists</text>
    
    <text x="100" y="1305" font-size="10" fill="#34495e" font-weight="bold">Schedule Operations:</text>
    <text x="110" y="1325" font-size="9" fill="#9b59b6">‚Ä¢ sp_upsert_class (insert/update generated schedule)</text>
  </g>
  
  <!-- Connection Pool Info -->
  <rect x="630" y="1160" width="500" height="180" fill="#fff" stroke="#3498db" stroke-width="1.5" rx="3"/>
  <text x="880" y="1185" font-size="13" font-weight="bold" text-anchor="middle" fill="#3498db">Database Connection</text>
  
  <text x="650" y="1215" font-size="11" fill="#34495e" font-weight="bold">MySQL Connection Pool (mysql2/promise)</text>
  <text x="660" y="1235" font-size="10" fill="#2c3e50">‚Ä¢ Host: localhost</text>
  <text x="660" y="1250" font-size="10" fill="#2c3e50">‚Ä¢ Database: timetable_db</text>
  <text x="660" y="1265" font-size="10" fill="#2c3e50">‚Ä¢ Connection: async/await support</text>
  <text x="660" y="1280" font-size="10" fill="#2c3e50">‚Ä¢ Error handling: try-catch blocks</text>
  
  <text x="650" y="1305" font-size="11" fill="#34495e" font-weight="bold">Key Constraints:</text>
  <text x="660" y="1325" font-size="9" fill="#2c3e50">‚úì Start time: 08:00-17:00, End time: ‚â§17:00</text>
  
  <!-- Arrow markers -->
  <defs>
    <marker id="arrowred" markerWidth="10" markerHeight="10" refX="5" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#e74c3c"/>
    </marker>
    <marker id="arroworange" markerWidth="10" markerHeight="10" refX="5" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#e67e22"/>
    </marker>
  </defs>
</svg>
